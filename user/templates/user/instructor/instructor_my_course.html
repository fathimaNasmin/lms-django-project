{% extends 'lms_main/base.html' %}

{% load static %}

{% load course_tags %}
{% load time_tags %}

{% load crispy_forms_filters %}
{% load crispy_forms_tags %}
{% crispy signup_form %}

{% block navbar %}
{% include 'lms_main/components/navbar.html' %}
{% endblock %}



{% block main %}

<!--====== TEACHERS PART START ======-->

<section id="teachers-singel" class="pt-70 pb-120 gray-bg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-4 col-md-8">
                <div class="teachers-left mt-50">
                    <div class="hero">
                        <img src="{{ instructor.profile_image }}" alt="Teachers">
                    </div>
                    <div class="name">
                        <h6>{{ instructor.full_name }}</h6>
                        <span>{{ instructor.designation}}</span>
                    </div>
                    <div class="social">
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook-square"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter-square"></i></a></li>
                            <li><a href="#"><i class="fa fa-google-plus-square"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin-square"></i></a></li>
                        </ul>
                    </div>
                    <div class="description">
                        <h5>About me</h5>
                        <p>{{instructor.about}}</p>
                    </div>
                </div> <!-- teachers left -->
            </div>
            <div class="col-lg-8">
                <div class="corses-singel-left mt-30">
                    <div class="title">
                        <h3>{{ course.title|title }}</h3>
                    </div> <!-- title -->
                    <div class="corses-singel-image pt-20">
                        <img src="{{ course.featured_image_url }}" alt="Courses" width="50" height="150" class="w-50 mx-auto">
                    </div> <!-- corses singel image -->    
                    <div class="accordion mt-20" id="accordionExample">
                        {% for video in videos %}
                        <div class="accordion" id="accordionExample">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button w-100" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                                        aria-expanded="true" aria-controls="collapseOne">
                                        <ul>
                                            <li class="d-inline list-inline-item">{{forloop.counter}}.&nbsp;</li>
                                            <li class="d-inline list-inline-item">{{ video.lesson.name }}</li>
                                            <li><a href="" data-toggle="modal" data-target="#edit-lesson-modal" id="edit-lesson-link" data-lesson-id="{{ video.lesson.id }}"><i class="fas fa-edit"></i></a></li>
                                            
                                        </ul>
                                        
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                                    data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <ul>
                                            <li class="d-inline list-inline-item"><i class="fa-brands fa-youtube" style="color: red;"></i></li>
                                            <li class="d-inline list-inline-item">
                                                <a href="https://www.youtube.com/watch?v={{ video.youtube_id}}" class="text-decoration-none text-secondary"
                                                    data-fancybox>{{video.title}}</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <!-- model: edit course & add lesson-videos to the course starts-->
                        <!-- Modal -->
                        <div class="modal fade" id="edit-lesson-modal" tabindex="-1" aria-labelledby="lessonLabel" aria-hidden="true">
                            <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content mx-5 my-5">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="lessonLabel">Edit Lesson</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                        
                                        <!-- Add lesson form -->
                                        <form id="edit-course-form-id" action="" method="POST" novalidate>
                                            <div class="mx-auto w-75">
                                                {% csrf_token %}
                        
                                                <!-- course form -->
                                                {{ lesson_form|crispy }}
                        
                                                <br>
                        
                                                <!-- Video inline form -->
                                                <div class="bg-info px-2 pt-2 pb-2">
                                                    <h6>Videos</h6>
                                                </div>
                                                <br>
                                                {{ video_formset.management_form }}
                                                {% for form in video_formset %}
                                                <div class="d-inline-flex w-100">
                                                    {{ form|crispy }}
                                                </div>
                        
                                                {% endfor %}
                        
                        
                        
                                                <!----display validation errors through ajax-->
                                                <div class="mx-auto">
                                                    <p class="text-danger" id="alert-error"></p>
                                                </div>
                                                <!-- what you will learn form ends -->
                                                <div class="d-flex justify-content-center">
                                                    <button type="submit" name="lesson-submit-btn" id="" class="btn btn-warning my-3">Edit
                                                        Lesson & Video</button>
                                                </div>
                                            </div>
                        
                                        </form>
                                        <!-- end course form -->
                                    </div>
                        
                                </div>
                            </div>
                        </div>
                        <!-- model:add course ends -->
                        {% endfor %}
            
            
                    </div>
                </div>
                
                
            </div>
        </div> <!-- row -->
    </div> <!-- container -->
</section>

<!--====== EVENTS PART ENDS ======-->




<!-- Footer starts here -->
{% include 'lms_main/components/footer.html' %}
<!-- Footer ends here -->




{% endblock %}